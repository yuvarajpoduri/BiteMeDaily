{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/models/Content.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst ContentSchema = new mongoose.Schema({\r\n  title: { type: String, required: true },\r\n  description: { type: String, required: true }, // Short explanation (max ~5 lines)\r\n  category: { \r\n    type: String, \r\n    required: true, \r\n    enum: [\r\n      'Tech Tips',\r\n      'Concepts Simplified',\r\n      'Shortcuts & Tools',\r\n      'Health & Focus',\r\n      'Useful Facts',\r\n      'Daily Fixes',\r\n      'History Stories'\r\n    ] \r\n  },\r\n  tags: [{ type: String }],\r\n  last_shown_at: { type: Date },\r\n  usefulness: { type: Number, min: 1, max: 5, default: 3 },\r\n  difficulty: { type: Number, min: 1, max: 5, default: 1 },\r\n  imageUrl: { type: String },\r\n  source: { type: String },\r\n}, { timestamps: true });\r\n\r\nexport default mongoose.models.Content || mongoose.model(\"Content\", ContentSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,IAAI,mKAAQ,CAAC,MAAM,CAAC;IACxC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,UAAU;QACR,MAAM;QACN,UAAU;QACV,MAAM;YACJ;YACA;YACA;YACA;YACA;YACA;YACA;SACD;IACH;IACA,MAAM;QAAC;YAAE,MAAM;QAAO;KAAE;IACxB,eAAe;QAAE,MAAM;IAAK;IAC5B,YAAY;QAAE,MAAM;QAAQ,KAAK;QAAG,KAAK;QAAG,SAAS;IAAE;IACvD,YAAY;QAAE,MAAM;QAAQ,KAAK;QAAG,KAAK;QAAG,SAAS;IAAE;IACvD,UAAU;QAAE,MAAM;IAAO;IACzB,QAAQ;QAAE,MAAM;IAAO;AACzB,GAAG;IAAE,YAAY;AAAK;uCAEP,mKAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,mKAAQ,CAAC,KAAK,CAAC,WAAW"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/components/ContentCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ContentCard.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ContentCard.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkS,GAC/T,gEACA","ignoreList":[0]}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/components/ContentCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/ContentCard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ContentCard.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA8Q,GAC3S,4CACA","ignoreList":[0]}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/app/%28dashboard%29/history/page.tsx"],"sourcesContent":["import { auth } from '@/auth';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\nimport Content from '@/models/Content';\r\nimport ContentCard from '@/components/ContentCard';\r\nimport { redirect } from 'next/navigation';\r\nimport { History } from 'lucide-react';\r\n\r\nexport default async function HistoryPage() {\r\n  const session = await auth();\r\n  if (!session?.user?.email) redirect('/login');\r\n\r\n  await dbConnect();\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const user: any = await User.findOne({ email: session.user.email });\r\n  if (!user) redirect('/login');\r\n\r\n  // Filter for items seen in the last 5 days\r\n  const fiveDaysAgo = new Date();\r\n  fiveDaysAgo.setDate(fiveDaysAgo.getDate() - 5);\r\n\r\n  const skippedIds = user.skippedContentIds || [];\r\n  const seenInLast5Days = user.seenContent?.filter((s: any) => \r\n    s.seenAt >= fiveDaysAgo && !skippedIds.includes(s.contentId)\r\n  ) || [];\r\n  const seenIds = seenInLast5Days.map((s: any) => s.contentId);\r\n  const savedIds = user.savedContentIds || [];\r\n\r\n  // Fetch items from Content collection\r\n  const rawContent = await Content.find({\r\n    _id: { $in: seenIds }\r\n  });\r\n\r\n  // Reorder according to the seenAt date from user record\r\n  const seenContent = seenInLast5Days\r\n    .map((s: any) => {\r\n      const item = rawContent.find(c => c._id.toString() === s.contentId);\r\n      if (!item) return null;\r\n      return {\r\n        ...item.toObject(),\r\n        seenAt: s.seenAt\r\n      };\r\n    })\r\n    .filter(Boolean)\r\n    .sort((a: any, b: any) => b.seenAt - a.seenAt);\r\n\r\n  return (\r\n    <div className=\"pt-4 pb-20 px-4\">\r\n      <header className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-white mb-1\">Your Journey</h1>\r\n        <p className=\"text-gray-500 text-xs uppercase tracking-widest font-bold\">History of Bites</p>\r\n      </header>\r\n\r\n      {seenContent.length > 0 ? (\r\n        <div className=\"flex flex-col gap-4\">\r\n            {seenContent.map((item: any) => (\r\n                <ContentCard\r\n                    key={item._id.toString()}\r\n                    id={item._id.toString()}\r\n                    title={item.title}\r\n                    description={item.description}\r\n                    category={item.category}\r\n                    tags={item.tags}\r\n                    isSaved={savedIds.includes(item._id.toString())}\r\n                    createdAt={item.createdAt}\r\n                />\r\n            ))}\r\n            <div className=\"mt-8 text-center\">\r\n              <p className=\"text-gray-600 text-[10px] font-bold uppercase tracking-widest\">End of History</p>\r\n            </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"flex flex-col items-center justify-center h-[60vh] text-center px-6\">\r\n            <div className=\"w-20 h-20 bg-accent-yellow/10 rounded-full flex items-center justify-center mb-6\">\r\n              <History className=\"w-10 h-10 text-accent-yellow\" />\r\n            </div>\r\n            <h3 className=\"text-xl font-bold text-white mb-2\">Clean Slate!</h3>\r\n            <p className=\"text-gray-400 text-sm leading-relaxed\">\r\n              You haven't seen any bites yet. Head over to Today and start discovering!\r\n            </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;;AAEe,eAAe;IAC5B,MAAM,UAAU,MAAM,IAAA,mHAAI;IAC1B,IAAI,CAAC,SAAS,MAAM,OAAO,IAAA,iMAAQ,EAAC;IAEpC,MAAM,IAAA,2HAAS;IACf,8DAA8D;IAC9D,MAAM,OAAY,MAAM,gIAAI,CAAC,OAAO,CAAC;QAAE,OAAO,QAAQ,IAAI,CAAC,KAAK;IAAC;IACjE,IAAI,CAAC,MAAM,IAAA,iMAAQ,EAAC;IAEpB,2CAA2C;IAC3C,MAAM,cAAc,IAAI;IACxB,YAAY,OAAO,CAAC,YAAY,OAAO,KAAK;IAE5C,MAAM,aAAa,KAAK,iBAAiB,IAAI,EAAE;IAC/C,MAAM,kBAAkB,KAAK,WAAW,EAAE,OAAO,CAAC,IAChD,EAAE,MAAM,IAAI,eAAe,CAAC,WAAW,QAAQ,CAAC,EAAE,SAAS,MACxD,EAAE;IACP,MAAM,UAAU,gBAAgB,GAAG,CAAC,CAAC,IAAW,EAAE,SAAS;IAC3D,MAAM,WAAW,KAAK,eAAe,IAAI,EAAE;IAE3C,sCAAsC;IACtC,MAAM,aAAa,MAAM,mIAAO,CAAC,IAAI,CAAC;QACpC,KAAK;YAAE,KAAK;QAAQ;IACtB;IAEA,wDAAwD;IACxD,MAAM,cAAc,gBACjB,GAAG,CAAC,CAAC;QACJ,MAAM,OAAO,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,GAAG,CAAC,QAAQ,OAAO,EAAE,SAAS;QAClE,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO;YACL,GAAG,KAAK,QAAQ,EAAE;YAClB,QAAQ,EAAE,MAAM;QAClB;IACF,GACC,MAAM,CAAC,SACP,IAAI,CAAC,CAAC,GAAQ,IAAW,EAAE,MAAM,GAAG,EAAE,MAAM;IAE/C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,8OAAC;wBAAE,WAAU;kCAA4D;;;;;;;;;;;;YAG1E,YAAY,MAAM,GAAG,kBACpB,8OAAC;gBAAI,WAAU;;oBACV,YAAY,GAAG,CAAC,CAAC,qBACd,8OAAC,4IAAW;4BAER,IAAI,KAAK,GAAG,CAAC,QAAQ;4BACrB,OAAO,KAAK,KAAK;4BACjB,aAAa,KAAK,WAAW;4BAC7B,UAAU,KAAK,QAAQ;4BACvB,MAAM,KAAK,IAAI;4BACf,SAAS,SAAS,QAAQ,CAAC,KAAK,GAAG,CAAC,QAAQ;4BAC5C,WAAW,KAAK,SAAS;2BAPpB,KAAK,GAAG,CAAC,QAAQ;;;;;kCAU9B,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;sCAAgE;;;;;;;;;;;;;;;;qCAInF,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,mNAAO;4BAAC,WAAU;;;;;;;;;;;kCAErB,8OAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,8OAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;;;;;;;;AAOjE"}}]
}