{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/app/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { auth } from '@/auth';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function toggleSaveContent(contentId: string, currentState: boolean) {\r\n  const session = await auth();\r\n  if (!session?.user?.email) {\r\n    return { error: \"Not authenticated\" };\r\n  }\r\n\r\n  try {\r\n    await dbConnect();\r\n    const user = await User.findOne({ email: session.user.email });\r\n    \r\n    if (!user) {\r\n        return { error: \"User not found\" };\r\n    }\r\n\r\n    if (currentState) {\r\n      // It was saved, so remove it\r\n      // Filter out specific ID safely\r\n      user.savedContentIds = user.savedContentIds.filter((id: string) => id !== contentId);\r\n    } else {\r\n      // It was not saved, so add it\r\n      if (!user.savedContentIds.includes(contentId)) {\r\n        user.savedContentIds.push(contentId);\r\n      }\r\n    }\r\n\r\n    await user.save();\r\n    revalidatePath('/saved');\r\n    revalidatePath('/home'); // Optional, mainly for sync\r\n    return { success: true, saved: !currentState };\r\n  } catch (error) {\r\n    console.error(\"Save error:\", error);\r\n    return { error: \"Failed to save\" };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAOsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,qDAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/app/actions/tracking.ts"],"sourcesContent":["'use server';\r\n\r\nimport { auth } from '@/auth';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\n\r\nexport async function trackCategoryView(category: string) {\r\n  const session = await auth();\r\n  if (!session?.user?.email) return;\r\n  \r\n  try {\r\n    await dbConnect();\r\n    const user = await User.findOne({ email: session.user.email });\r\n    if (user) {\r\n      if (!user.interactionProfile) {\r\n        user.interactionProfile = { categoryScores: {}, totalReads: 0 };\r\n      }\r\n      \r\n      const currentScore = user.interactionProfile.categoryScores.get(category) || 0;\r\n      user.interactionProfile.categoryScores.set(category, currentScore + 1);\r\n      user.interactionProfile.totalReads += 1;\r\n      user.interactionProfile.lastActive = new Date();\r\n      \r\n      await user.save();\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Tracking error\", error);\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAMsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,qDAAA"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/app/actions/seen.ts"],"sourcesContent":["'use server';\r\n\r\nimport { auth } from '@/auth';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function markAsSeen(contentId: string) {\r\n  const session = await auth();\r\n  if (!session?.user?.email) return;\r\n\r\n  try {\r\n    await dbConnect();\r\n    const user = await User.findOne({ email: session.user.email });\r\n    \r\n    if (user && !user.seenContentIds.includes(contentId)) {\r\n        user.seenContentIds.push(contentId);\r\n        await user.save();\r\n        revalidatePath('/home');\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Tracking Seen error\", error);\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAOsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,8CAAA"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/components/ContentCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Bookmark, Share2, Info, Maximize2, X } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport clsx from 'clsx';\r\nimport { toggleSaveContent } from '@/app/actions';\r\nimport { trackCategoryView } from '@/app/actions/tracking';\r\nimport { markAsSeen } from '@/app/actions/seen';\r\nimport Image from 'next/image';\r\n\r\nconst categoryColors: Record<string, string> = {\r\n  News: 'border-accent-blue text-accent-blue',\r\n  Entertainment: 'border-accent-orange text-accent-orange',\r\n  'History Stories': 'border-accent-yellow text-accent-yellow',\r\n  Facts: 'border-accent-green text-accent-green',\r\n  'Health Suggestions': 'border-pink-500 text-pink-500', \r\n  Placements: 'border-purple-500 text-purple-500',\r\n  Companies: 'border-indigo-500 text-indigo-500', \r\n  'Computer Science Tools': 'border-cyan-500 text-cyan-500',\r\n  Default: 'border-gray-500 text-gray-500'\r\n};\r\n\r\ninterface ContentCardProps {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  source?: string;\r\n  imageUrl?: string;\r\n  previewMode?: boolean; // New prop for Home Page condensed view\r\n  isSaved?: boolean;\r\n  onSave?: (id: string, currentlySaved: boolean) => void;\r\n}\r\n\r\nexport default function ContentCard({ \r\n  id, \r\n  title, \r\n  description, \r\n  category, \r\n  source, \r\n  imageUrl, \r\n  previewMode = false,\r\n  isSaved = false, \r\n  onSave \r\n}: ContentCardProps) {\r\n  const [saved, setSaved] = useState(isSaved);\r\n  const [expanded, setExpanded] = useState(!previewMode); \r\n  const colorClass = categoryColors[category] || categoryColors.Default;\r\n\r\n  const handleSaveToggle = async (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    const previousState = saved;\r\n    const newState = !saved;\r\n    setSaved(newState); \r\n    \r\n    if (onSave) {\r\n      onSave(id, previousState);\r\n    } else {\r\n      await toggleSaveContent(id, previousState); \r\n    }\r\n  };\r\n\r\n  const handleExpand = () => {\r\n    if (previewMode && !expanded) {\r\n      setExpanded(true);\r\n      trackCategoryView(category);\r\n      markAsSeen(id); // Mark seen only when fully opened\r\n    }\r\n  };\r\n\r\n  const handleClose = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setExpanded(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <motion.div \r\n        initial={{ opacity: 0, y: 20 }}\r\n        whileInView={{ opacity: 1, y: 0 }}\r\n        viewport={{ once: true, margin: \"-50px\" }}\r\n        transition={{ duration: 0.4 }}\r\n        onClick={handleExpand}\r\n        className={clsx(\r\n            \"w-full mb-4 p-1 relative transition-all duration-300\",\r\n            previewMode && !expanded ? \"cursor-pointer active:scale-95\" : \"\"\r\n        )}\r\n      >\r\n        <div className={clsx(\r\n            \"bg-[#111] border border-gray-800 rounded-2xl overflow-hidden shadow-lg relative ml-[0.8rem] mr-[0.8rem]\",\r\n            previewMode && !expanded ? \"h-28 flex flex-row items-center p-3 gap-4\" : \"\" \r\n        )}>\r\n           \r\n           {/* Condensed / Preview Layout */}\r\n           {previewMode && !expanded ? (\r\n              <>\r\n                 <div className=\"w-20 h-20 rounded-lg relative overflow-hidden flex-shrink-0 bg-gray-900 border border-gray-800\">\r\n                    {imageUrl ? (\r\n                        <Image src={imageUrl} alt={title} fill className=\"object-cover\" sizes=\"80px\" />\r\n                    ) : (\r\n                        <div className={`w-full h-full ${colorClass.replace('text-', 'bg-')}/20`} />\r\n                    )}\r\n                 </div>\r\n                 <div className=\"flex-1 min-w-0\">\r\n                    <p className={clsx(\"text-[10px] font-bold uppercase mb-1\", colorClass)}>{category}</p>\r\n                    <h3 className=\"text-white font-bold text-sm leading-tight line-clamp-2\">{title}</h3>\r\n                 </div>\r\n                 <Maximize2 className=\"w-5 h-5 text-gray-500 flex-shrink-0\" />\r\n              </>\r\n           ) : (\r\n              /* Full Layout */\r\n              <>\r\n                <div className={clsx(\"absolute top-3 left-3 px-3 py-1 rounded-full border text-xs font-bold bg-black/80 backdrop-blur-sm z-10\", colorClass)}>\r\n                  {category}\r\n                </div>\r\n                \r\n                {previewMode && (\r\n                     <button onClick={handleClose} className=\"absolute top-3 right-3 p-2 bg-black/60 rounded-full z-20 text-white\">\r\n                        <X size={16} />\r\n                     </button>\r\n                )}\r\n\r\n                {imageUrl ? (\r\n                  <div className=\"relative w-full h-48\">\r\n                    <Image \r\n                      src={imageUrl} \r\n                      alt={title} \r\n                      fill\r\n                      className=\"object-cover\"\r\n                      sizes=\"(max-width: 480px) 100vw, 480px\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"w-full h-32 bg-gradient-to-br from-gray-900 to-black flex items-center justify-center\">\r\n                    <span className=\"text-gray-700 text-sm italic\">No visuals, just vibes.</span>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"p-5\">\r\n                  <h2 className=\"text-xl font-bold text-white mb-2 leading-tight\">{title}</h2>\r\n                  <p className=\"text-gray-300 text-sm leading-relaxed mb-4\">{description}</p>\r\n                  \r\n                  {source && (\r\n                    <div className=\"flex items-center text-xs text-gray-500 mb-4 bg-gray-900/50 p-2 rounded-lg gap-2\">\r\n                      <Info size={14} />\r\n                      <span>Source: <span className=\"text-gray-400\">{source}</span></span>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex items-center justify-between mt-2 pt-3 border-t border-gray-800\">\r\n                    <button \r\n                      onClick={handleSaveToggle}\r\n                      className=\"flex items-center gap-2 text-sm text-gray-400 hover:text-white transition-colors\"\r\n                    >\r\n                      <Bookmark className={clsx(\"w-5 h-5\", saved ? \"fill-accent-yellow text-accent-yellow\" : \"\")} />\r\n                      {saved ? \"Saved!\" : \"Save for later\"}\r\n                    </button>\r\n                    \r\n                    <button className=\"text-gray-400 hover:text-accent-blue transition-colors\">\r\n                      <Share2 className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </>\r\n           )}\r\n        </div>\r\n      </motion.div>\r\n      \r\n      {/* Overlay backing for modal feel when expanded in preview mode */}\r\n       {previewMode && expanded && (\r\n          <div className=\"fixed inset-0 bg-black/60 z-[-1]\" onClick={handleClose} />\r\n       )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}