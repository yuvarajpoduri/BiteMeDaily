{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/auth.config.ts"],"sourcesContent":["import type { NextAuthConfig } from 'next-auth';\r\n \r\nexport const authConfig = {\r\n  pages: {\r\n    signIn: '/login',\r\n  },\r\n  callbacks: {\r\n    authorized({ auth, request: { nextUrl } }) {\r\n      const isLoggedIn = !!auth?.user;\r\n      // Protected routes\r\n      const isProtectedRoute = \r\n        nextUrl.pathname.startsWith('/home') || \r\n        nextUrl.pathname.startsWith('/stories') || \r\n        nextUrl.pathname.startsWith('/saved');\r\n      \r\n      const isAuthRoute = nextUrl.pathname === '/login' || nextUrl.pathname === '/signup';\r\n\r\n      if (isProtectedRoute) {\r\n        if (isLoggedIn) return true;\r\n        return false; // Redirect to login\r\n      } else if (isAuthRoute) {\r\n        if (isLoggedIn) {\r\n           return Response.redirect(new URL('/home', nextUrl));\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    async session({ session, token }: any) {\r\n      if (token.sub && session.user) {\r\n        session.user.id = token.sub;\r\n      }\r\n      return session;\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    async jwt({ token }: any) {\r\n      return token;\r\n    }\r\n  },\r\n  providers: [], \r\n} satisfies NextAuthConfig;\r\n"],"names":[],"mappings":";;;;AAEO,MAAM,aAAa;IACxB,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,YAAW,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE;YACvC,MAAM,aAAa,CAAC,CAAC,MAAM;YAC3B,mBAAmB;YACnB,MAAM,mBACJ,QAAQ,QAAQ,CAAC,UAAU,CAAC,YAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,eAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC;YAE9B,MAAM,cAAc,QAAQ,QAAQ,KAAK,YAAY,QAAQ,QAAQ,KAAK;YAE1E,IAAI,kBAAkB;gBACpB,IAAI,YAAY,OAAO;gBACvB,OAAO,OAAO,oBAAoB;YACpC,OAAO,IAAI,aAAa;gBACtB,IAAI,YAAY;oBACb,OAAO,SAAS,QAAQ,CAAC,IAAI,IAAI,SAAS;gBAC7C;YACF;YACA,OAAO;QACT;QACA,8DAA8D;QAC9D,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAO;YACnC,IAAI,MAAM,GAAG,IAAI,QAAQ,IAAI,EAAE;gBAC7B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC7B;YACA,OAAO;QACT;QACA,8DAA8D;QAC9D,MAAM,KAAI,EAAE,KAAK,EAAO;YACtB,OAAO;QACT;IACF;IACA,WAAW,EAAE;AACf"}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error(\r\n    \"Please define the MONGODB_URI environment variable inside .env.local\",\r\n  );\r\n}\r\n\r\ninterface MongooseCache {\r\n  conn: typeof mongoose | null;\r\n  promise: Promise<typeof mongoose> | null;\r\n}\r\n\r\n// Global augmentation to add mongoose to the NodeJS global type\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var mongoose: MongooseCache | undefined;\r\n}\r\n\r\nconst cached: MongooseCache = global.mongoose || { conn: null, promise: null };\r\n\r\nif (!global.mongoose) {\r\n  global.mongoose = cached;\r\n}\r\n\r\nasync function dbConnect() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    const opts = {\r\n      bufferCommands: false,\r\n    };\r\n\r\n    cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\r\n      return mongoose;\r\n    });\r\n  }\r\n  \r\n  try {\r\n    cached.conn = await cached.promise;\r\n  } catch (e) {\r\n    cached.promise = null;\r\n    throw e;\r\n  }\r\n\r\n  return cached.conn;\r\n}\r\n\r\nexport default dbConnect;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MACR;AAEJ;AAaA,MAAM,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE7E,IAAI,CAAC,OAAO,QAAQ,EAAE;IACpB,OAAO,QAAQ,GAAG;AACpB;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAc,MAAM,IAAI,CAAC,CAAC;YAC1D,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/models/User.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n  name: {\r\n    type: String,\r\n    required: [true, \"Please provide a name\"],\r\n    maxlength: [60, \"Name cannot be more than 60 characters\"],\r\n  },\r\n  email: {\r\n    type: String,\r\n    required: [true, \"Please provide an email\"],\r\n    unique: true,\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: [true, \"Please provide a password\"],\r\n  },\r\n  savedContentIds: [{\r\n    type: String, \r\n  }],\r\n  // Track seen content to hide from Home feed\r\n  seenContentIds: [{\r\n    type: String,\r\n  }],\r\n  // AI/ML Personalization Metadata\r\n  interactionProfile: {\r\n    categoryScores: {\r\n      type: Map,\r\n      of: Number,\r\n      default: {},\r\n    },\r\n    totalReads: { type: Number, default: 0 },\r\n    lastActive: { type: Date, default: Date.now }, \r\n  }\r\n}, { timestamps: true });\r\n\r\nexport default mongoose.models.User || mongoose.model(\"User\", UserSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,mKAAQ,CAAC,MAAM,CAAC;IACrC,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAwB;QACzC,WAAW;YAAC;YAAI;SAAyC;IAC3D;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAA0B;QAC3C,QAAQ;IACV;IACA,UAAU;QACR,MAAM;QACN,UAAU;YAAC;YAAM;SAA4B;IAC/C;IACA,iBAAiB;QAAC;YAChB,MAAM;QACR;KAAE;IACF,4CAA4C;IAC5C,gBAAgB;QAAC;YACf,MAAM;QACR;KAAE;IACF,iCAAiC;IACjC,oBAAoB;QAClB,gBAAgB;YACd,MAAM;YACN,IAAI;YACJ,SAAS,CAAC;QACZ;QACA,YAAY;YAAE,MAAM;YAAQ,SAAS;QAAE;QACvC,YAAY;YAAE,MAAM;YAAM,SAAS,KAAK,GAAG;QAAC;IAC9C;AACF,GAAG;IAAE,YAAY;AAAK;uCAEP,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAC,QAAQ"}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/auth.ts"],"sourcesContent":["import NextAuth from 'next-auth';\r\nimport { authConfig } from './auth.config';\r\nimport Credentials from 'next-auth/providers/credentials';\r\nimport bcrypt from 'bcryptjs';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\n\r\nexport const { auth, signIn, signOut, handlers } = NextAuth({\r\n  ...authConfig,\r\n  providers: [\r\n    Credentials({\r\n      async authorize(credentials) {\r\n        if (!credentials) return null;\r\n        \r\n        const email = credentials.email as string;\r\n        const password = credentials.password as string;\r\n\r\n        if (!email || !password) return null;\r\n\r\n        try {\r\n          await dbConnect();\r\n          const user = await User.findOne({ email });\r\n          if (!user) return null;\r\n\r\n          const passwordsMatch = await bcrypt.compare(password, user.password);\r\n\r\n          if (passwordsMatch) {\r\n            return {\r\n                id: user._id.toString(),\r\n                name: user.name,\r\n                email: user.email,\r\n            };\r\n          }\r\n        } catch (error) {\r\n          console.error('Auth error:', error);\r\n        }\r\n\r\n        console.log('Invalid credentials');\r\n        return null; \r\n      },\r\n    }),\r\n  ],\r\n  session: {\r\n    strategy: \"jwt\",\r\n  },\r\n  secret: process.env.AUTH_SECRET,\r\n});\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAA,gKAAQ,EAAC;IAC1D,GAAG,mIAAU;IACb,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,OAAO;gBAEzB,MAAM,QAAQ,YAAY,KAAK;gBAC/B,MAAM,WAAW,YAAY,QAAQ;gBAErC,IAAI,CAAC,SAAS,CAAC,UAAU,OAAO;gBAEhC,IAAI;oBACF,MAAM,IAAA,2HAAS;oBACf,MAAM,OAAO,MAAM,gIAAI,CAAC,OAAO,CAAC;wBAAE;oBAAM;oBACxC,IAAI,CAAC,MAAM,OAAO;oBAElB,MAAM,iBAAiB,MAAM,4IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;oBAEnE,IAAI,gBAAgB;wBAClB,OAAO;4BACH,IAAI,KAAK,GAAG,CAAC,QAAQ;4BACrB,MAAM,KAAK,IAAI;4BACf,OAAO,KAAK,KAAK;wBACrB;oBACF;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,eAAe;gBAC/B;gBAEA,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACT;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,QAAQ,QAAQ,GAAG,CAAC,WAAW;AACjC"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/app/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { auth } from '@/auth';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport async function toggleSaveContent(contentId: string, currentState: boolean) {\r\n  const session = await auth();\r\n  if (!session?.user?.email) {\r\n    return { error: \"Not authenticated\" };\r\n  }\r\n\r\n  try {\r\n    await dbConnect();\r\n    const user = await User.findOne({ email: session.user.email });\r\n    \r\n    if (!user) {\r\n        return { error: \"User not found\" };\r\n    }\r\n\r\n    if (currentState) {\r\n      // It was saved, so remove it\r\n      // Filter out specific ID safely\r\n      user.savedContentIds = user.savedContentIds.filter((id: string) => id !== contentId);\r\n    } else {\r\n      // It was not saved, so add it\r\n      if (!user.savedContentIds.includes(contentId)) {\r\n        user.savedContentIds.push(contentId);\r\n      }\r\n    }\r\n\r\n    await user.save();\r\n    revalidatePath('/saved');\r\n    revalidatePath('/home'); // Optional, mainly for sync\r\n    return { success: true, saved: !currentState };\r\n  } catch (error) {\r\n    console.error(\"Save error:\", error);\r\n    return { error: \"Failed to save\" };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;;;;;AAEO,eAAe,kBAAkB,SAAiB,EAAE,YAAqB;IAC9E,MAAM,UAAU,MAAM,IAAA,mHAAI;IAC1B,IAAI,CAAC,SAAS,MAAM,OAAO;QACzB,OAAO;YAAE,OAAO;QAAoB;IACtC;IAEA,IAAI;QACF,MAAM,IAAA,2HAAS;QACf,MAAM,OAAO,MAAM,gIAAI,CAAC,OAAO,CAAC;YAAE,OAAO,QAAQ,IAAI,CAAC,KAAK;QAAC;QAE5D,IAAI,CAAC,MAAM;YACP,OAAO;gBAAE,OAAO;YAAiB;QACrC;QAEA,IAAI,cAAc;YAChB,6BAA6B;YAC7B,gCAAgC;YAChC,KAAK,eAAe,GAAG,KAAK,eAAe,CAAC,MAAM,CAAC,CAAC,KAAe,OAAO;QAC5E,OAAO;YACL,8BAA8B;YAC9B,IAAI,CAAC,KAAK,eAAe,CAAC,QAAQ,CAAC,YAAY;gBAC7C,KAAK,eAAe,CAAC,IAAI,CAAC;YAC5B;QACF;QAEA,MAAM,KAAK,IAAI;QACf,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC,UAAU,4BAA4B;QACrD,OAAO;YAAE,SAAS;YAAM,OAAO,CAAC;QAAa;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,eAAe;QAC7B,OAAO;YAAE,OAAO;QAAiB;IACnC;AACF;;;IAjCsB;;AAAA,+OAAA"}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/app/actions/tracking.ts"],"sourcesContent":["'use server';\r\n\r\nimport { auth } from '@/auth';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\n\r\nexport async function trackCategoryView(category: string) {\r\n  const session = await auth();\r\n  if (!session?.user?.email) return;\r\n  \r\n  try {\r\n    await dbConnect();\r\n    const user = await User.findOne({ email: session.user.email });\r\n    if (user) {\r\n      if (!user.interactionProfile) {\r\n        user.interactionProfile = { categoryScores: {}, totalReads: 0 };\r\n      }\r\n      \r\n      const currentScore = user.interactionProfile.categoryScores.get(category) || 0;\r\n      user.interactionProfile.categoryScores.set(category, currentScore + 1);\r\n      user.interactionProfile.totalReads += 1;\r\n      user.interactionProfile.lastActive = new Date();\r\n      \r\n      await user.save();\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Tracking error\", error);\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;AAEO,eAAe,kBAAkB,QAAgB;IACtD,MAAM,UAAU,MAAM,IAAA,mHAAI;IAC1B,IAAI,CAAC,SAAS,MAAM,OAAO;IAE3B,IAAI;QACF,MAAM,IAAA,2HAAS;QACf,MAAM,OAAO,MAAM,gIAAI,CAAC,OAAO,CAAC;YAAE,OAAO,QAAQ,IAAI,CAAC,KAAK;QAAC;QAC5D,IAAI,MAAM;YACR,IAAI,CAAC,KAAK,kBAAkB,EAAE;gBAC5B,KAAK,kBAAkB,GAAG;oBAAE,gBAAgB,CAAC;oBAAG,YAAY;gBAAE;YAChE;YAEA,MAAM,eAAe,KAAK,kBAAkB,CAAC,cAAc,CAAC,GAAG,CAAC,aAAa;YAC7E,KAAK,kBAAkB,CAAC,cAAc,CAAC,GAAG,CAAC,UAAU,eAAe;YACpE,KAAK,kBAAkB,CAAC,UAAU,IAAI;YACtC,KAAK,kBAAkB,CAAC,UAAU,GAAG,IAAI;YAEzC,MAAM,KAAK,IAAI;QACjB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;IAClC;AACF;;;IAtBsB;;AAAA,+OAAA"}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/.next-internal/server/app/%28dashboard%29/saved/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {toggleSaveContent as '60b6f4273ff739c65ffe343239b21d12df167910b0'} from 'ACTIONS_MODULE0'\nexport {trackCategoryView as '40903bd59552efd38e1c35436695816314fd290742'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA"}}]
}