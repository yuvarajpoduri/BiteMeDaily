{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/auth.config.ts"],"sourcesContent":["import type { NextAuthConfig } from 'next-auth';\r\n \r\nexport const authConfig = {\r\n  pages: {\r\n    signIn: '/login',\r\n  },\r\n  callbacks: {\r\n    authorized({ auth, request: { nextUrl } }) {\r\n      const isLoggedIn = !!auth?.user;\r\n      // Protected routes\r\n      const isProtectedRoute = \r\n        nextUrl.pathname.startsWith('/home') || \r\n        nextUrl.pathname.startsWith('/stories') || \r\n        nextUrl.pathname.startsWith('/saved');\r\n      \r\n      const isAuthRoute = nextUrl.pathname === '/login' || nextUrl.pathname === '/signup';\r\n\r\n      if (isProtectedRoute) {\r\n        if (isLoggedIn) return true;\r\n        return false; // Redirect to login\r\n      } else if (isAuthRoute) {\r\n        if (isLoggedIn) {\r\n           return Response.redirect(new URL('/home', nextUrl));\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    async session({ session, token }: any) {\r\n      if (token.sub && session.user) {\r\n        session.user.id = token.sub;\r\n      }\r\n      return session;\r\n    },\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    async jwt({ token }: any) {\r\n      return token;\r\n    }\r\n  },\r\n  providers: [], \r\n} satisfies NextAuthConfig;\r\n"],"names":[],"mappings":";;;;AAEO,MAAM,aAAa;IACxB,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,YAAW,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE;YACvC,MAAM,aAAa,CAAC,CAAC,MAAM;YAC3B,mBAAmB;YACnB,MAAM,mBACJ,QAAQ,QAAQ,CAAC,UAAU,CAAC,YAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC,eAC5B,QAAQ,QAAQ,CAAC,UAAU,CAAC;YAE9B,MAAM,cAAc,QAAQ,QAAQ,KAAK,YAAY,QAAQ,QAAQ,KAAK;YAE1E,IAAI,kBAAkB;gBACpB,IAAI,YAAY,OAAO;gBACvB,OAAO,OAAO,oBAAoB;YACpC,OAAO,IAAI,aAAa;gBACtB,IAAI,YAAY;oBACb,OAAO,SAAS,QAAQ,CAAC,IAAI,IAAI,SAAS;gBAC7C;YACF;YACA,OAAO;QACT;QACA,8DAA8D;QAC9D,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAO;YACnC,IAAI,MAAM,GAAG,IAAI,QAAQ,IAAI,EAAE;gBAC7B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC7B;YACA,OAAO;QACT;QACA,8DAA8D;QAC9D,MAAM,KAAI,EAAE,KAAK,EAAO;YACtB,OAAO;QACT;IACF;IACA,WAAW,EAAE;AACf"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI;\r\n\r\nif (!MONGODB_URI) {\r\n  throw new Error(\r\n    \"Please define the MONGODB_URI environment variable inside .env.local\",\r\n  );\r\n}\r\n\r\ninterface MongooseCache {\r\n  conn: typeof mongoose | null;\r\n  promise: Promise<typeof mongoose> | null;\r\n}\r\n\r\n// Global augmentation to add mongoose to the NodeJS global type\r\ndeclare global {\r\n  // eslint-disable-next-line no-var\r\n  var mongoose: MongooseCache | undefined;\r\n}\r\n\r\nconst cached: MongooseCache = global.mongoose || { conn: null, promise: null };\r\n\r\nif (!global.mongoose) {\r\n  global.mongoose = cached;\r\n}\r\n\r\nasync function dbConnect() {\r\n  if (cached.conn) {\r\n    return cached.conn;\r\n  }\r\n\r\n  if (!cached.promise) {\r\n    const opts = {\r\n      bufferCommands: false,\r\n    };\r\n\r\n    cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\r\n      return mongoose;\r\n    });\r\n  }\r\n  \r\n  try {\r\n    cached.conn = await cached.promise;\r\n  } catch (e) {\r\n    cached.promise = null;\r\n    throw e;\r\n  }\r\n\r\n  return cached.conn;\r\n}\r\n\r\nexport default dbConnect;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MACR;AAEJ;AAaA,MAAM,SAAwB,OAAO,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE7E,IAAI,CAAC,OAAO,QAAQ,EAAE;IACpB,OAAO,QAAQ,GAAG;AACpB;AAEA,eAAe;IACb,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,mKAAQ,CAAC,OAAO,CAAC,aAAc,MAAM,IAAI,CAAC,CAAC;YAC1D,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/models/User.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n  name: {\r\n    type: String,\r\n    required: [true, \"Please provide a name\"],\r\n    maxlength: [60, \"Name cannot be more than 60 characters\"],\r\n  },\r\n  email: {\r\n    type: String,\r\n    required: [true, \"Please provide an email\"],\r\n    unique: true,\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: [true, \"Please provide a password\"],\r\n  },\r\n  savedContentIds: [{\r\n    type: String, \r\n  }],\r\n  // Explicitly skipped content to be hidden everywhere\r\n  skippedContentIds: [{\r\n    type: String,\r\n  }],\r\n  // Track seen content with timestamps for rotation and expiration\r\n  seenContent: [{\r\n    contentId: { type: String, required: true },\r\n    seenAt: { type: Date, default: Date.now }\r\n  }],\r\n  // AI/ML Personalization Metadata\r\n  interactionProfile: {\r\n    categoryScores: {\r\n      type: Map,\r\n      of: Number,\r\n      default: {},\r\n    },\r\n    totalReads: { type: Number, default: 0 },\r\n    lastActive: { type: Date, default: Date.now }, \r\n  }\r\n}, { timestamps: true });\r\n\r\nexport default mongoose.models.User || mongoose.model(\"User\", UserSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,mKAAQ,CAAC,MAAM,CAAC;IACrC,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAwB;QACzC,WAAW;YAAC;YAAI;SAAyC;IAC3D;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAA0B;QAC3C,QAAQ;IACV;IACA,UAAU;QACR,MAAM;QACN,UAAU;YAAC;YAAM;SAA4B;IAC/C;IACA,iBAAiB;QAAC;YAChB,MAAM;QACR;KAAE;IACF,qDAAqD;IACrD,mBAAmB;QAAC;YAClB,MAAM;QACR;KAAE;IACF,iEAAiE;IACjE,aAAa;QAAC;YACZ,WAAW;gBAAE,MAAM;gBAAQ,UAAU;YAAK;YAC1C,QAAQ;gBAAE,MAAM;gBAAM,SAAS,KAAK,GAAG;YAAC;QAC1C;KAAE;IACF,iCAAiC;IACjC,oBAAoB;QAClB,gBAAgB;YACd,MAAM;YACN,IAAI;YACJ,SAAS,CAAC;QACZ;QACA,YAAY;YAAE,MAAM;YAAQ,SAAS;QAAE;QACvC,YAAY;YAAE,MAAM;YAAM,SAAS,KAAK,GAAG;QAAC;IAC9C;AACF,GAAG;IAAE,YAAY;AAAK;uCAEP,mKAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,mKAAQ,CAAC,KAAK,CAAC,QAAQ"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/auth.ts"],"sourcesContent":["import NextAuth from 'next-auth';\r\nimport { authConfig } from './auth.config';\r\nimport Credentials from 'next-auth/providers/credentials';\r\nimport bcrypt from 'bcryptjs';\r\nimport dbConnect from '@/lib/db';\r\nimport User from '@/models/User';\r\n\r\nexport const { auth, signIn, signOut, handlers } = NextAuth({\r\n  ...authConfig,\r\n  providers: [\r\n    Credentials({\r\n      async authorize(credentials) {\r\n        if (!credentials) return null;\r\n        \r\n        const email = credentials.email as string;\r\n        const password = credentials.password as string;\r\n\r\n        if (!email || !password) return null;\r\n\r\n        try {\r\n          await dbConnect();\r\n          const user = await User.findOne({ email });\r\n          if (!user) return null;\r\n\r\n          const passwordsMatch = await bcrypt.compare(password, user.password);\r\n\r\n          if (passwordsMatch) {\r\n            return {\r\n                id: user._id.toString(),\r\n                name: user.name,\r\n                email: user.email,\r\n            };\r\n          }\r\n        } catch (error) {\r\n          console.error('Auth error:', error);\r\n        }\r\n\r\n        console.log('Invalid credentials');\r\n        return null; \r\n      },\r\n    }),\r\n  ],\r\n  session: {\r\n    strategy: \"jwt\",\r\n  },\r\n  secret: process.env.AUTH_SECRET,\r\n});\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;AAEO,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAA,kKAAQ,EAAC;IAC1D,GAAG,qIAAU;IACb,WAAW;QACT,IAAA,uKAAW,EAAC;YACV,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,OAAO;gBAEzB,MAAM,QAAQ,YAAY,KAAK;gBAC/B,MAAM,WAAW,YAAY,QAAQ;gBAErC,IAAI,CAAC,SAAS,CAAC,UAAU,OAAO;gBAEhC,IAAI;oBACF,MAAM,IAAA,6HAAS;oBACf,MAAM,OAAO,MAAM,kIAAI,CAAC,OAAO,CAAC;wBAAE;oBAAM;oBACxC,IAAI,CAAC,MAAM,OAAO;oBAElB,MAAM,iBAAiB,MAAM,8IAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;oBAEnE,IAAI,gBAAgB;wBAClB,OAAO;4BACH,IAAI,KAAK,GAAG,CAAC,QAAQ;4BACrB,MAAM,KAAK,IAAI;4BACf,OAAO,KAAK,KAAK;wBACrB;oBACF;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,eAAe;gBAC/B;gBAEA,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACT;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,QAAQ,QAAQ,GAAG,CAAC,WAAW;AACjC"}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///C:/Full%20Stack/MERN%20Stack/Projects/BiteMeDaily/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import { handlers } from \"@/auth\"; // Referring to the auth.ts we just created\r\nexport const { GET, POST } = handlers;\r\n"],"names":[],"mappings":";;;;;;AAAA,+LAAmC,2CAA2C;;AACvE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,yHAAQ"}}]
}